{% extends 'base.html' %}
{% block title %}My Profile{% endblock %}

{% block content %}
  <h1 class='mt-3'>My Profile</h1>
  <hr/>
  <form action='/students/update-profile' method='POST'>
    <div class="form-group">
      <label for="full_name">Full Name</label>
      <input type="text" class="form-control" id="full_name" value="{{student['full_name']}}">
    </div>
    <div class="form-group">
      <label for="uni">Uni</label>
      <input type="text" class="form-control" id="uni" value="{{student['uni']}}">
    </div>
    <div class="form-group">
      <label for="email">Email address</label>
      <input type="email" class="form-control" id="email" value="{{student['email']}}">
    </div>

    <div class="form-group">
      <label for="bio">Bio</label>
      <textarea class="form-control" id="bio" name="bio">{{student['bio']}}</textarea>
    </div>

    <div class="form-group">
      <label>Clubs/Extra Curriculars</label>
      <div id='inputs'>
        {% for club in student['clubs']: %}
          <input class='form-control mt-1' name='clubs' value='{{club}}'>
        {% endfor %}
      </div>
      <button class='btn btn-primary mt-2' id='add-club-button'>Add Club</button>
      <script>
        const button = document.getElementById("add-club-button");
        button.addEventListener('click', function(e) {
          e.preventDefault();

          const inputsContainer = document.getElementById('inputs');
          inputsContainer.insertAdjacentHTML('beforeend', "<input class='form-control mt-1' name='clubs'>");
        })
      </script>
    </div>

    <div class="form-group">
      <p>Major:</p>
      {% for major in majors: %}
        {% if major['id'] in my_majors %}
          <input type='checkbox' name='majors' value='{{major["title"]}}' checked> {{major['title']}}<br/>
        {% else %}
          <input type='checkbox' name='majors' value='{{major["title"]}}'> {{major['title']}}<br/>
        {% endif %}
      {% endfor %}
    </div>

    <div class="form-group">
      <p>course:</p>
      {% for course in courses: %}
        {% if course['id'] in my_courses %}
          <input type='checkbox' name='courses' value='{{course["code"]}}' checked> {{course['code']}}<br/>
        {% else %}
          <input type='checkbox' name='courses' value='{{course["code"]}}'> {{course['code']}}<br/>
        {% endif %}
      {% endfor %}
    </div>


    <button type="submit" class="btn btn-primary">Submit</button>
  </form>
{% endblock %}
